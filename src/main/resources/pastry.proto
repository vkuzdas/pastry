syntax = "proto3";

// generate directly into "java/proto"
option java_package = "proto";

message JoinRequest {
  string ip = 1;
  int32 port = 2;
}

message Empty {}

message JoinResponse {
  repeated NodeState nodeState = 1;
}

message NodeState {
  NodeReference owner = 1;

  repeated NodeReference leafSet = 2;

  repeated RoutingTableRow routingTable = 3;

  repeated NodeReference neighborSet = 4;
}

message RoutingTableRow {
  repeated NodeReference routingTableEntry = 1;
}

message NodeReference {
  string ip = 1;
  int32 port = 2;
}

service PastryService {
  rpc Join(JoinRequest) returns (JoinResponse) {}
}